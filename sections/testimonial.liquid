{{ 'testimonial.css' | asset_url | stylesheet_tag }}
{{ 'testimonial.js' | asset_url | script_tag }}

<link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
<section class="testimonial" data-testimonial>
  <div class="testimonial__container">
    <h2 class="testimonial__title">
      {{ section.settings.heading }}
    </h2>
    <div class="testimonial__slider">
      <button
        class="testimonial__nav testimonial__nav--prev"
        aria-label="Previous review"
        data-prev
      >
        <i class="las la-angle-left"></i>
      </button>
      <div class="testimonial__viewport">
        <div class="testimonial__track" data-track>
          {% for block in section.blocks %}
            <div class="testimonial__item">
              {% if block.settings.image != blank %}
                <div class="testimonial__image">
                  <img
                    src="{{ block.settings.image | image_url: width: 600 }}"
                    alt="{{ block.settings.name }}"
                    loading="lazy"
                    height="500"
                    width="500"
                  >
                </div>
              {% endif %}
              <div class="testimonial__body">
                {% comment %} rating {% endcomment %}
                <div class="testimonial__rating">
                  {% for i in (1..block.settings.rating) %}
                    <img
                      src="{{ 'star.svg' | asset_url }}"
                      alt="star"
                      class="testimonial__star"
                      height="auto",
                      width="auto"
                    >
                  {% endfor %}
                </div>
                {% comment %} review text {% endcomment %}
                <p class="testimonial__text">
                  {{ block.settings.text }}
                </p>

                <div class="testimonial__divider"></div>

                {% comment %} author {% endcomment %}
                <div class="testimonial__author">
                  {% if block.settings.avatar != blank %}
                    <img
                      class="testimonial__avatar"
                      src="{{ block.settings.avatar | image_url: width: 80 }}"
                      alt="{{ block.settings.name }}"
                      loading="lazy",
                      width="500",
                      height="600"
                    >
                  {% endif %}

                  <div class="testimonial__author-meta">
                    <span class="testimonial__author-name">
                      {{ block.settings.name }}
                    </span>

                    {% if block.settings.verified %}
                      <span class="testimonial__verified"> Verified Buyer </span>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>

      <button
        class="testimonial__nav testimonial__nav--next"
        aria-label="Next review"
        data-next
      >
        <i class="las la-angle-right"></i>
      </button>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "CusTomer review slider",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Customer reviews"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "range",
          "id": "rating",
          "label": "Rating",
          "min": 1,
          "max": 5,
          "default": 5
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Reviews text",
          "default": "This product is so amazing good job!"
        },
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "Avatar"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Customer name",
          "default": "Alex Bruce"
        },
        {
          "type": "checkbox",
          "id": "verified",
          "label": "Verified buyed",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Customer review(testimonial)",
      "blocks": [
        {
          "type": "review"
        },
        {
          "type": "review"
        },
        {
          "type": "review"
        }
      ]
    }
  ]
}
{% endschema %}
